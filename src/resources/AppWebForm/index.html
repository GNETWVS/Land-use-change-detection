<!DOCTYPE html>
<html lang="en">
<head>
    <title>Lukin Artur Homework</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.15/themes/css/cartodb.css"/>
    <link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" />
    <!--<link rel="stylesheet" href="styles/leaflet.draw.css"/>-->

    <style>
        html, body {
            height: 100%;
            padding: 0;
            margin: 0;
        }

        #map {
            height: 100%;
            padding: 0;
            margin: 0;
        }

        #dashboard {
            height: 33%;
            padding: 25px;
            margin: 0;
            border-top: 2px solid #333;
        }

        #dash {
            margin: 25px 0;
            width: 400px;
        }

        button {
            margin-right: 10px;
            font-family: "Proxima Nova W01", "Helvetica Neue", Helvetica, Arial, sans-serif;
            background: transparent;
        }

        p {
            font-size: 17px;
            margin-bottom: 10px;
        }
    </style>

    <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="http://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
    <script type="text/javascript" src="http://fast.fonts.net/jsapi/b6470a43-5105-49d3-95ae-75217a436bf8.js"></script>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
<script src="scripts/leaflet.ajax.min.js"></script>
<!--<script src="scripts/leaflet.js"></script>-->
<!--<script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js"></script>-->
<!--<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>-->
<!--<script src="scripts/leaflet.draw.js"></script>-->
<!--<script src="scripts/Leaflet.draw.drag.js"></script>-->
<!--<script src="scripts/jsts.min.js"></script>-->
<!--<script src="scripts/leaflet.ajax.min.js"></script>-->
<!--<script src="scripts/terraformer.min.js"></script>-->
<!--<script src="scripts/terraformer-wkt-parser.js"></script>-->
<!--<script src="scripts/ActiveLayers.js"></script>-->
<!--<script src="scripts/SelectLayers.js"></script>-->

<script language="JavaScript">
    // Map styles
    var OpenTopoMap = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
        maxZoom: 17,
        attribution: 'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'
    });

    // Choose center and zoom level
    var options = {
        center: [55.792191, 49.113994], // Kazan
        zoom: 15,
        layers: OpenTopoMap
    };

    // Instantiate map on specified DOM element
    var map_object = new L.Map('map', options);

    var geoJsonLayer;

    function showResult() {
        if (geoJsonLayer !== undefined) {
            map_object.removeLayer(geoJsonLayer);
        }
        geoJsonLayer = new L.geoJson();
        geoJsonLayer.addTo(map_object);
        $.ajax({
            dataType: "json",
            url: "res/result.json",
            success: function(data) {
                $(data.features).each(function(key, data) {
                    geoJsonLayer.addData(data);
                });
                geoJsonLayer.eachLayer(function (data) {
                    switch (data.feature.properties.before) {
                        case 0: {
                            switch (data.feature.properties.after) {
                                case 0: {
                                    data.setStyle({
                                        color: '#1e90ff',
                                        fillOpacity: 0.9,
                                        fillColor: '#1e90ff'
                                    });
                                    break;
                                }
                                case 1: {
                                    data.setStyle({
                                        color: '#b1e1ac',
                                        fillOpacity: 0.9,
                                        fillColor: '#b1e1ac'
                                    });
                                    break;
                                }
                                case 2: {
                                    data.setStyle({
                                        color: '#f80000',
                                        fillOpacity: 0.9,
                                        fillColor: '#f80000'
                                    });
                                    break;
                                }
                                case 3: {
                                    data.setStyle({
                                        color: '#ffe100',
                                        fillOpacity: 0.9,
                                        fillColor: '#ffe100'
                                    });
                                    break;
                                }
                            }
                            break;
                        }
                        case 1: {
                            switch (data.feature.properties.after) {
                                case 0: {
                                    data.setStyle({
                                        color: '#f58b00',
                                        fillOpacity: 0.9,
                                        fillColor: '#f58b00'
                                    });
                                    break;
                                }
                                case 1: {
                                    data.setStyle({
                                        color: '#1fff28',
                                        fillOpacity: 0.9,
                                        fillColor: '#1fff28'
                                    });
                                    break;
                                }
                                case 2: {
                                    data.setStyle({
                                        color: '#ff00e1',
                                        fillOpacity: 0.9,
                                        fillColor: '#ff00e1'
                                    });
                                    break;
                                }
                                case 3: {
                                    data.setStyle({
                                        color: '#00f8be',
                                        fillOpacity: 0.9,
                                        fillColor: '#00f8be'
                                    });
                                    break;
                                }
                            }
                            break;
                        }
                        case 2: {
                            switch (data.feature.properties.after) {
                                case 0: {
                                    data.setStyle({
                                        color: '#593f22',
                                        fillOpacity: 0.9,
                                        fillColor: '#593f22'
                                    });
                                    break;
                                }
                                case 1: {
                                    data.setStyle({
                                        color: '#b930ff',
                                        fillOpacity: 0.9,
                                        fillColor: '#b930ff'
                                    });
                                    break;
                                }
                                case 2: {
                                    data.setStyle({
                                        color: '#afb9c3',
                                        fillOpacity: 0.9,
                                        fillColor: '#afb9c3'
                                    });
                                    break;
                                }
                                case 3: {
                                    data.setStyle({
                                        color: '#0f1680',
                                        fillOpacity: 0.9,
                                        fillColor: '#0f1680'
                                    });
                                    break;
                                }
                            }
                            break;
                        }
                        case 3: {
                            switch (data.feature.properties.after) {
                                case 0: {
                                    data.setStyle({
                                        color: '#e89c9c',
                                        fillOpacity: 0.9,
                                        fillColor: '#e89c9c'
                                    });
                                    break;
                                }
                                case 1: {
                                    data.setStyle({
                                        color: '#2b9722',
                                        fillOpacity: 0.9,
                                        fillColor: '#2b9722'
                                    });
                                    break;
                                }
                                case 2: {
                                    data.setStyle({
                                        color: '#221fff',
                                        fillOpacity: 0.9,
                                        fillColor: '#221fff'
                                    });
                                    break;
                                }
                                case 3: {
                                    data.setStyle({
                                        color: '#144616',
                                        fillOpacity: 0.9,
                                        fillColor: '#144616'
                                    });
                                    break;
                                }
                            }
                            break;
                        }
                    }
                });
                map_object.flyToBounds(geoJsonLayer.getBounds(), 11);
            }
        }).error(function() {});
    }

</script>
</body>
</html>